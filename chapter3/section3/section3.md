# 正确性
<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=default"></script>
为了达到正确性，考虑到拜占庭式的最大数量的失败，必须证明欺诈交易不可能在协商一致期间得到确认，除非faulty节点的数量超过了限制。RPCA正确性的证明是直接的：因为一个交易只有在80%的服务器UNL同意的情况下才被批准，只要80%的百分比是诚实的，那么就不会批准欺诈性交易。因此，对于网络中n个节点的UNL，只要：
$$f \leq (n - 1) / 5$$
其中f是拜占庭faulty节点。事实上，即使在有\\((n−1)/5 + 1\\)拜占庭faulty节点的情况下，正确性仍然在技术上得到维护。协商一致的进程将失败，但仍然不会批准欺诈性的交易。事实上，不正确的交易需要\\((4n + 1)/5\\)拜占庭式的faulty节点才能被确认。我们称这个为弱正确性界限，之前那个为强正确性界限。
还应指出，并非所有“欺诈性”交易都构成威胁，即使欺诈交易在一致性同步期间得到确认。如果用户试图在两笔交易中花费双倍的资金，例如，即使这两项交易都是在一致性同步过程中确认的，在第一笔交易被应用之后，第二笔交易将失败，因为资金不再可用。

稍微进行一些不同的分析，让我们假设任何节点决定串通并加入一个邪恶的卡特尔组织的概率都是\\(p_c\\)。在此基础上，利用\\(p*\\)给出了其正确性概率:
$$p* = \sum_{k=1}^{\frac{n - 1}5} p_c^i (1 - p_c)^{n-i}$$
这一概率代表了在给定\\(p_c\\)的情况下，邪恶的卡特尔组织的规模保持在最大限度拜占庭错误节点数量以下的可能性。由于这种可能性是二项分布，\\(p_c\\)值大于20%将导致网络规模大于20%的预期卡特尔，从而阻碍了一致性进程。在实践中，UNL节点是为了尽量减少\\(p_c\\)值去选择的，而不是随机选择的。由于节点不是匿名的，而是密码学上可识别的，所以从各种不同的大陆、国家、工业、意识形态等中选择的一个UNL节点，其产生的PC值远低于20%。举个例子，反诽谤联盟和威斯博罗浸信会勾结诈骗的可能性。这个网络，肯定比20%要小得多。即使UNL有一个相对较大的\\(p_c\\)，比如说15%，即使在UNL中只有200个节点时，其正确性的概率也是非常高的：97.8%。

下图描述了如何将不正确的概率作为不同PC值的UNL大小的函数进行缩放的图形表示。
![younghz的Markdown库](/asserts/1.bmp "图一")
##图1.UNL的规模和邪恶的卡特尔阻挠一致性达成的概率的关系函数，不同\\(p_c\\)的值代表UNL的任何成员决定与他人勾结密谋的可能性。在这里，较低的数值表明一致性过程成功的可能性更高。
注意，这里的垂直轴表示邪恶的卡特尔阻挠一致性过程的可能性，因此数值较低，表明一致性过程获得成功的可能性更大。如图所示，即使\\(p_c\\)值高达10%，随着UNL增长超过100个节点，达成共识的阻力很快就变得微不足道了。